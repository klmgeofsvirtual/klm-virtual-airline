<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KLM Virtual Airline | Operations Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* KLM Brand Colors */
        :root {
            --klm-blue: #00A1DE;
            --klm-dark: #0077A3;
            --klm-sky: #E5F6FF;
            --status-active: #10b981;
            --status-phaseout: #f59e0b;
            --status-order: #6366f1;
        }
        .text-klm { color: var(--klm-blue); }
        .bg-klm { background-color: var(--klm-blue); }
        .bg-klm-dark { background-color: var(--klm-dark); }
        .hover-bg-klm:hover { background-color: var(--klm-dark); }
        
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Animations */
        .fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Nav Active State */
        .nav-link.active {
            color: var(--klm-blue);
            font-weight: 700;
        }
        .nav-link.active::after {
            content: '';
            display: block;
            width: 100%;
            height: 2px;
            background: var(--klm-blue);
            margin-top: 2px;
        }

        /* Epaulettes */
        .epaulette {
            background: #1e293b;
            width: 60px;
            height: 80px;
            border-radius: 4px 4px 20px 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding-bottom: 10px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        .stripe {
            width: 80%;
            height: 6px;
            background: #eab308;
            margin-top: 4px;
        }

        /* Map Styles */
        #fleet-map {
            width: 100%;
            height: 600px;
            background: #0f172a;
            z-index: 1;
        }
    </style>
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body class="bg-slate-50 text-slate-800 flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center cursor-pointer" onclick="router('home')">
                    <img id="nav-logo" src="" alt="KLM Logo" class="h-8 md:h-10 mr-3">
                    <div class="hidden md:flex flex-col leading-tight border-l border-slate-300 pl-3 ml-2">
                        <span class="font-bold text-slate-900 text-sm tracking-wide">OPERATIONS</span>
                        <span class="text-xs text-slate-500 uppercase tracking-widest">Center</span>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <button onclick="router('home')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Ops Center</button>
                    <button onclick="router('news')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">News</button>
                    <button onclick="router('fleet')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Fleet</button>
                    <button onclick="router('routes')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Network</button>
                    <button onclick="router('livemap')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Live Map</button>
                    <button onclick="router('sop')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">SOP</button>
                    <button onclick="router('partners')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Partners</button>
                    <button onclick="router('community')" class="nav-link text-slate-600 hover:text-klm transition-colors font-medium py-2">Crew</button>
                    
                    <a href="https://discord.gg/Zj9BrrxU" target="_blank" class="bg-slate-900 text-white px-5 py-2 rounded font-bold hover:bg-slate-800 transition shadow flex items-center text-sm uppercase tracking-wide">
                        <i data-lucide="radio" class="w-4 h-4 mr-2"></i> Report In
                    </a>
                </div>

                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-slate-600 hover:text-klm focus:outline-none p-2">
                        <i data-lucide="menu" class="h-7 w-7"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-slate-100 shadow-xl absolute w-full left-0 z-40">
            <div class="p-4 space-y-2">
                <button onclick="router('home'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-bold text-slate-800">Ops Center</button>
                <button onclick="router('news'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">News</button>
                <button onclick="router('fleet'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">Fleet</button>
                <button onclick="router('routes'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">Network</button>
                <button onclick="router('livemap'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">Live Map</button>
                <button onclick="router('sop'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">SOP</button>
                <button onclick="router('partners'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">Partners</button>
                <button onclick="router('community'); toggleMobileMenu()" class="block w-full text-left px-4 py-3 rounded hover:bg-slate-50 font-medium text-slate-600">Crew</button>
            </div>
        </div>
    </nav>

    <main id="app-content" class="flex-grow"></main>

    <footer class="bg-slate-900 text-slate-400 py-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8 border-b border-slate-800 pb-8">
                <div class="col-span-1 md:col-span-2">
                    <img id="footer-logo" src="" alt="KLM Logo" class="h-8 mb-4 brightness-0 invert opacity-80">
                    <p class="text-sm leading-relaxed max-w-sm text-slate-500">
                        A non-profit virtual aviation community. We are not affiliated with KLM Royal Dutch Airlines.
                        <br><br>
                        <strong>Operations Hub:</strong> Amsterdam Airport Schiphol (EHAM)
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4 uppercase text-xs tracking-wider">Flight Operations</h4>
                    <ul class="space-y-2 text-sm">
                        <li><button onclick="router('sop')" class="hover:text-white transition">Standard Operating Procedures</button></li>
                        <li><button onclick="router('fleet')" class="hover:text-white transition">Fleet Manifest</button></li>
                        <li><button onclick="router('routes')" class="hover:text-white transition">Network Map</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-4 uppercase text-xs tracking-wider">Command Staff</h4>
                    <ul class="space-y-2 text-sm font-mono">
                        <li>mileflight <span class="text-xs text-slate-600">// CEO</span></li>
                        <li>JustFrost <span class="text-xs text-slate-600">// Temp CEO</span></li>
                        <li>Nihid9044 <span class="text-xs text-slate-600">// CMO</span></li>
                    </ul>
                </div>
            </div>
            <div class="text-center md:text-left text-xs text-slate-600">
                &copy; 2026 KLM Virtual Airline. "Flying the World, Virtually."
            </div>
        </div>
    </footer>

    <script>
        const siteImages = {
            logo: "https://upload.wikimedia.org/wikipedia/commons/c/c7/KLM_logo.svg",
            homeHero: "https://content.r9cdn.net/rimg/dimg/aa/3f/bf32fc29-al-KL-168342f6d92.jpg?width=1366&height=768&xhint=1075&yhint=770&crop=true",
            fleetHeader: "https://images.squarespace-cdn.com/content/v1/513bcb31e4b0df53688faccb/1465974398569-OX4HIEZ4213UPO7JLFPN/KLM+orange+aircraft",
            routesHeader: "https://prod-img.telegraaf.nl/public/incoming/n38dez-air-france-vliegers-worden-ingezet-om-een-boeing-777-te-vliegen./alternates/SIXTEEN_NINE_128/Air%20France-vliegers%20worden%20ingezet%20om%20een%20Boeing%20777%20te%20vliegen.",
            sopHeader: "https://klmflightacademy.nl/wp-content/uploads/2021/10/737-cockpit.jpg",
            communityHeader: "https://s3.amazonaws.com/marquee-test-akiaisur2rgicbmpehea/L8ArtPS8Rgirr3CCcZOI_JPG%20-%20High-res-Billy%20Bishop%20Tower.jpg",
            partnersHeader: "https://img-cdn.inc.com/image/upload/f_webp,q_auto,c_fit/images/panoramic/handshake-1940x900_36426.jpg",
            newsHeader: "https://images.unsplash.com/photo-1504711434969-e33886168f5c?auto=format&fit=crop&q=80&w=1200"
        };

        const fleetData = [
            { type: "Embraer 190", role: "Cityhopper", desc: "Short-haul, high-frequency ops for training and local connectivity.", status: "Active", count: 21, img: "https://upload.wikimedia.org/wikipedia/commons/c/c6/Berlin_Brandenburg_Airport_KLM_Cityhopper_Embraer_E195-E2_PH-NXC_%28DSC02878%29.jpg" },
            { type: "Embraer 195-E2", role: "Cityhopper", desc: "Modern regional efficiency. High frequency European connections.", status: "Active", count: 25, img: "https://img.static-kl.com/transform/53cea398-7cff-4e3f-a7b1-496d4552fb10/" },
            { type: "Boeing 737-700", role: "Short Haul", desc: "Legacy workhorse. Being phased out for A320neo family.", status: "Phasing Out", count: 6, img: "https://insideflyer.nl/wp-content/uploads/2018/07/B737-opstijgen.jpg" },
            { type: "Boeing 737-800", role: "Short Haul", desc: "Backbone of European operations. Gradual retirement scheduled.", status: "Phasing Out", count: 30, img: "https://upload.wikimedia.org/wikipedia/commons/1/18/KLM_Boeing_737-800_PH-BCD_%2826038861623%29.jpg" },
            { type: "Airbus A320neo", role: "Short Haul", desc: "Next-gen European core. Maximum efficiency and realism.", status: "On Order", count: 9, img: "https://image.parool.nl/211007987/width/2480/impressie-van-een-airbus-a320-neo-in-de-kleuren-van-klm" },
            { type: "Airbus A321neo", role: "Short Haul", desc: "High-capacity European routes. Primary replacement for B737.", status: "Active", count: 22, img: "https://img.static-kl.com/transform/8806738a-a661-4934-a177-95adef39307d/" },
            { type: "Airbus A330-200", role: "Medium Haul", desc: "Intercontinental connector. Scheduled for retirement.", status: "Phasing Out", count: 6, img: "https://cdn.flightsim.to/images/27/inibuilds-a330-300-klm-fleet-pack-55321-1735741086-uIy_G.jpg?width=1400" },
            { type: "Boeing 777-300ER", role: "Long Haul", desc: "High-capacity global reach. Fleet size reducing.", status: "Active", count: 11, img: "https://www.aerotime.aero/images/klm_boeing_777-300er_orange_pride_livery.jpg" },
            { type: "Boeing 787-9", role: "Long Haul", desc: "The future of our long-haul operations. Elite flagship.", status: "Active", count: 13, img: "https://content.presspage.com/uploads/162/1920_25508202-10155250600310773-6357422191407278812-n.jpg" },
            { type: "Boeing 787-10", role: "Long Haul", desc: "High-capacity Dreamliner for premium long-haul routes.", status: "Active", count: 14, img: "https://content.presspage.com/uploads/162/1920_paulridderhof30jun196473-465547.jpg?10000" },
        ];

        const routeData = {
            "Europe": [ /* ... existing route data ... */
                { city: "London Heathrow", code: "EGLL", out: "1001+", in: "1002+" }, { city: "Paris CDG", code: "LFPG", out: "1401+", in: "1402+" }, { city: "Berlin", code: "EDDB", out: "1775+", in: "1770+" }, { city: "Rome", code: "LIRF", out: "1601+", in: "1600+" }, { city: "Madrid", code: "LEMD", out: "1501+", in: "1500+" }, { city: "Vienna", code: "LOWW", out: "1901+", in: "1900+" }, { city: "Brussels", code: "EBBR", out: "1701+", in: "1700+" }, { city: "Zurich", code: "LSZH", out: "1917+", in: "1916+" }, { city: "Geneva", code: "LSGG", out: "1929+", in: "1928+" }, { city: "Stockholm", code: "ESSA", out: "1215+", in: "1216+" }, { city: "Copenhagen", code: "EKCH", out: "1267+", in: "1266+" }, { city: "Oslo", code: "ENGM", out: "1197+", in: "1196+" }, { city: "Helsinki", code: "EFHK", out: "1251+", in: "1248+" }, { city: "Porto", code: "LPPR", out: "1571+", in: "1570+" }, { city: "Lisbon", code: "LPPT", out: "1579+", in: "1580+" }, { city: "Kraków", code: "EPKK", out: "1323+", in: "1322+" }, { city: "Warsaw", code: "EPWA", out: "1313+", in: "1310+" }, { city: "Prague", code: "LKPR", out: "1351+", in: "1350+" }, { city: "Budapest", code: "LHBP", out: "1363+", in: "1362+" }, { city: "Bucharest", code: "LROP", out: "1373+", in: "1372+" }, { city: "Marseille", code: "LFML", out: "1465+", in: "1464+" }, { city: "Nice", code: "LFMN", out: "1475+", in: "1472+" }, { city: "Athens", code: "LGAV", out: "1955+", in: "1952+" }
            ],
            "North America": [
                 { city: "New York JFK", code: "KJFK", out: "641+", in: "642+" }, { city: "Atlanta", code: "KATL", out: "621+", in: "622+" }, { city: "Los Angeles", code: "KLAX", out: "601+", in: "602+" }, { city: "San Francisco", code: "KSFO", out: "605+", in: "606+" }, { city: "Chicago", code: "KORD", out: "611+", in: "612+" }, { city: "Washington", code: "KIAD", out: "651+", in: "652+" }, { city: "Boston", code: "KBOS", out: "617+", in: "618+" }, { city: "Houston", code: "KIAH", out: "661+", in: "662+" }, { city: "Toronto", code: "CYYZ", out: "691+", in: "692+" }, { city: "Montreal", code: "CYUL", out: "671+", in: "672+" }, { city: "Calgary", code: "CYYC", out: "677+", in: "678+" }, { city: "Vancouver", code: "CYVR", out: "681+", in: "682+" }, { city: "Mexico City", code: "MMMX", out: "685+", in: "686+" }
            ],
             "South America": [
                 { city: "São Paulo", code: "SBGR", out: "791", in: "792" }, { city: "Rio de Janeiro", code: "SBGL", out: "705", in: "706" }, { city: "Buenos Aires", code: "SAEZ", out: "701", in: "702" }, { city: "Lima", code: "SPJC", out: "743", in: "744" }, { city: "Bogotá", code: "SKBO", out: "741", in: "742" }, { city: "Quito", code: "SEQM", out: "751", in: "752" }, { city: "Guayaquil", code: "SEGU", out: "755", in: "756" }, { city: "Paramaribo", code: "SMJP", out: "713", in: "714" }, { city: "Aruba", code: "TNCA", out: "765", in: "766" }, { city: "Curaçao", code: "TNCC", out: "735", in: "736" }, { city: "St. Maarten", code: "TNCM", out: "777", in: "778" }
             ],
            "Africa": [
                 { city: "Nairobi", code: "HKJK", out: "565", in: "566" }, { city: "Dar es Salaam", code: "HTDA", out: "515", in: "516" }, { city: "Johannesburg", code: "FAOR", out: "591", in: "592" }, { city: "Cape Town", code: "FACT", out: "595+", in: "596+" }, { city: "Accra", code: "DGAA", out: "589", in: "590" }, { city: "Lagos", code: "DNMM", out: "587", in: "588" }, { city: "Kigali", code: "HRYR", out: "535", in: "536*" }, { city: "Entebbe", code: "HUEN", out: "535", in: "536" }
            ],
            "Asia": [
                 { city: "Tokyo", code: "RJAA", out: "861", in: "862" }, { city: "Seoul", code: "RKSI", out: "855", in: "856" }, { city: "Singapore", code: "WSSS", out: "835", in: "836" }, { city: "Hong Kong", code: "VHHH", out: "887", in: "888" }, { city: "Delhi", code: "VIDP", out: "871", in: "872" }, { city: "Mumbai", code: "VABB", out: "877", in: "878" }, { city: "Bangalore", code: "VOBL", out: "879", in: "880" }, { city: "Beijing", code: "ZBAA", out: "897", in: "898" }, { city: "Shanghai", code: "ZSPD", out: "895", in: "896" }, { city: "Bangkok", code: "VTBS", out: "843", in: "844" }, { city: "Kuala Lumpur", code: "WMKK", out: "809", in: "810" }, { city: "Jakarta", code: "WIII", out: "809", in: "810" }, { city: "Manila", code: "RPLL", out: "807", in: "808" }, { city: "Taipei", code: "RCTP", out: "807", in: "808" }, { city: "Denpasar", code: "WADD", out: "835", in: "836" }
            ],
            "Middle East": [
                { city: "Dubai", code: "OMDB", out: "427", in: "428" }, { city: "Tel Aviv", code: "LLBG", out: "461", in: "462" }
            ]
        };

        const pages = {
            home: `
                <div class="relative bg-slate-900 text-white fade-in min-h-[90vh] flex items-center">
                    <div class="absolute inset-0">
                        <img src="${siteImages.homeHero}" class="w-full h-full object-cover opacity-50" alt="KLM Ops">
                        <div class="absolute inset-0 bg-gradient-to-r from-slate-900 via-slate-900/80 to-transparent"></div>
                    </div>
                    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
                        <div class="inline-flex items-center gap-2 bg-klm/20 border border-klm/50 text-klm-sky px-4 py-1.5 rounded-full mb-8 backdrop-blur-md">
                            <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                            <span class="text-xs font-bold tracking-widest uppercase">Ops Normal</span>
                        </div>
                        <h1 class="text-5xl md:text-7xl font-black tracking-tight mb-6 leading-tight max-w-3xl">
                            Flying the World, <span class="text-klm">Virtually.</span><br>
                            <span class="text-3xl md:text-4xl text-slate-400 font-bold block mt-4">For Pilots Who Fly Like They Mean It.</span>
                        </h1>
                        <p class="text-lg md:text-xl text-slate-300 mb-10 max-w-2xl font-light leading-relaxed border-l-4 border-klm pl-6">
                            Join a small, active, operations-focused community with realistic procedures and elite standards. We prioritize skill over numbers.
                        </p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mb-12">
                            <button onclick="router('routes')" class="group bg-white/5 hover:bg-white/10 border border-white/10 hover:border-klm p-6 rounded-lg text-left transition duration-300">
                                <div class="flex justify-between items-start mb-4">
                                    <i data-lucide="globe" class="w-6 h-6 text-klm"></i>
                                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-500 group-hover:text-white transition"></i>
                                </div>
                                <h3 class="font-bold text-white mb-1">Global Network</h3>
                                <p class="text-xs text-slate-400">View our strategic route deployment.</p>
                            </button>
                            
                            <button onclick="router('livemap')" class="group bg-white/5 hover:bg-white/10 border border-white/10 hover:border-klm p-6 rounded-lg text-left transition duration-300">
                                <div class="flex justify-between items-start mb-4">
                                    <i data-lucide="radar" class="w-6 h-6 text-klm"></i>
                                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-500 group-hover:text-white transition"></i>
                                </div>
                                <h3 class="font-bold text-white mb-1">Active Operations</h3>
                                <p class="text-xs text-slate-400">Live telemetry of active fleet.</p>
                            </button>

                            <button onclick="router('sop')" class="group bg-white/5 hover:bg-white/10 border border-white/10 hover:border-klm p-6 rounded-lg text-left transition duration-300">
                                <div class="flex justify-between items-start mb-4">
                                    <i data-lucide="book" class="w-6 h-6 text-klm"></i>
                                    <i data-lucide="arrow-right" class="w-4 h-4 text-slate-500 group-hover:text-white transition"></i>
                                </div>
                                <h3 class="font-bold text-white mb-1">SOP & Standards</h3>
                                <p class="text-xs text-slate-400">Procedures for elite pilots.</p>
                            </button>
                        </div>
                    </div>
                </div>
            `,
            
            news: `
                <div class="relative bg-slate-900 py-24 fade-in">
                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="border-b border-slate-700 pb-8 mb-12">
                            <h1 class="text-4xl font-black text-white mb-4">Operational Directives</h1>
                            <p class="text-slate-400 text-lg">Fleet strategy, route adjustments, and airspace advisories.</p>
                        </div>
                        
                        <div class="space-y-12">
                             <!-- Article 0: Fleet Renewal -->
                            <article class="bg-slate-800/50 rounded-lg p-8 border-l-4 border-indigo-500">
                                <div class="flex items-center gap-3 mb-4 text-xs font-mono text-indigo-400 uppercase tracking-widest">
                                    <span>20 JAN 2026</span>
                                    <span>//</span>
                                    <span>Fleet Strategy</span>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-4">End of an Era — Fleet Renewal</h2>
                                <div class="text-slate-300 space-y-4 leading-relaxed">
                                    <p>KLM Virtual Airlines is officially closing one chapter and stepping into a new era. We have begun phasing out legacy workhorses: the B777-300ER and A330-200. Five 777 units have already been transferred.</p>
                                    <p>Simultaneously, we are divesting the B737NG fleet to pave the way for a streamlined A320neo/A321neo core. This fleet renewal reflects our commitment to realism and sustainability.</p>
                                    <ul class="list-disc list-inside bg-slate-900/50 p-4 rounded border border-slate-700 text-sm">
                                        <li><strong class="text-white">Q2 2026:</strong> A350-1000 deliveries (New Flagship).</li>
                                        <li><strong class="text-white">Q1 2027:</strong> Full fleet modernization complete.</li>
                                    </ul>
                                </div>
                            </article>

                            <!-- Article 2: Middle East -->
                            <article class="bg-slate-800/50 rounded-lg p-8 border-l-4 border-red-500">
                                <div class="flex items-center gap-3 mb-4 text-xs font-mono text-red-400 uppercase tracking-widest">
                                    <span>16 JAN 2026</span>
                                    <span>//</span>
                                    <span>Security Advisory</span>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-4">Middle East Airspace: High Alert</h2>
                                <p class="text-slate-300 mb-4">Mandatory re-routing in effect due to regional instability. Safety compliance is non-negotiable for all active pilots.</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div class="bg-red-900/20 p-3 rounded border border-red-900/50 text-red-200">
                                        <strong>RESTRICTED:</strong> Iraq, Iran, Qatar airspace.
                                    </div>
                                    <div class="bg-green-900/20 p-3 rounded border border-green-900/50 text-green-200">
                                        <strong>CLEARED:</strong> Saudi Corridor → Egypt → Horn of Africa.
                                    </div>
                                </div>
                            </article>

                             <!-- Article 4: Caribbean Return -->
                             <article class="bg-slate-800/50 rounded-lg p-8 border-l-4 border-amber-500">
                                <div class="flex items-center gap-3 mb-4 text-xs font-mono text-amber-400 uppercase tracking-widest">
                                    <span>07 JAN 2026</span>
                                    <span>//</span>
                                    <span>Network Ops</span>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-4">Resumption of Caribbean Services</h2>
                                <p class="text-slate-300">
                                    Scheduled services to St. Maarten (TNCM) resume in March. Aruba and Curaçao are tentatively scheduled for April, contingent on regional stability. This restores critical leisure capacity for the Summer season.
                                </p>
                            </article>
                        </div>
                    </div>
                </div>
            `,

            fleet: `
                <div class="relative bg-slate-900 py-24 fade-in">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-16">
                            <h1 class="text-4xl font-black text-white mb-4">Fleet Manifest</h1>
                            <p class="text-slate-400 max-w-2xl mx-auto">Strategic asset allocation. Our fleet is modernized for efficiency and operational realism.</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            ${fleetData.map(plane => {
                                let statusColor = plane.status === 'Active' ? 'text-emerald-400 border-emerald-500/30 bg-emerald-500/10' : 
                                                  plane.status === 'Phasing Out' ? 'text-amber-400 border-amber-500/30 bg-amber-500/10' : 
                                                  'text-indigo-400 border-indigo-500/30 bg-indigo-500/10';
                                return `
                                <div class="bg-slate-800 rounded-lg overflow-hidden border border-slate-700 hover:border-klm transition group">
                                    <div class="h-48 overflow-hidden relative">
                                        <img src="${plane.img}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition duration-700">
                                        <div class="absolute top-3 right-3 ${statusColor} border px-2 py-1 rounded text-xs font-bold uppercase tracking-wider backdrop-blur-md">
                                            ${plane.status}
                                        </div>
                                    </div>
                                    <div class="p-6">
                                        <div class="flex justify-between items-baseline mb-2">
                                            <h3 class="text-xl font-bold text-white">${plane.type}</h3>
                                            <span class="text-slate-500 text-sm font-mono">QTY: ${plane.count}</span>
                                        </div>
                                        <div class="text-klm text-xs font-bold uppercase tracking-wide mb-3">${plane.role}</div>
                                        <p class="text-slate-400 text-sm leading-relaxed border-t border-slate-700 pt-3">${plane.desc}</p>
                                    </div>
                                </div>
                                `
                            }).join('')}
                        </div>
                    </div>
                </div>
            `,

            routes: `
                <div class="relative bg-white py-24 fade-in">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex flex-col md:flex-row gap-12 mb-12">
                            <div class="md:w-1/3">
                                <h1 class="text-4xl font-black text-slate-900 mb-6">Network Deployment</h1>
                                <p class="text-slate-600 leading-relaxed mb-6">
                                    Our route network is built around <strong>Amsterdam (EHAM)</strong> as a hub, with routes deployed strategically based on fleet capability and season.
                                </p>
                                <div class="bg-slate-50 p-4 rounded border border-slate-200 text-sm text-slate-700 italic">
                                    "Active pilots execute real operations; seasonal and planned routes reflect realistic airline scheduling."
                                </div>
                            </div>
                            <div class="md:w-2/3 relative h-[400px] bg-slate-900 rounded-xl overflow-hidden border border-slate-800 shadow-2xl">
                                <div id="fleet-map"></div>
                                <div class="absolute bottom-4 right-4 bg-slate-900/90 backdrop-blur text-white p-3 rounded border border-slate-700 text-xs z-[1000]">
                                    <div class="flex items-center gap-2 mb-1"><span class="w-2 h-2 rounded-full bg-klm"></span> Active Routes</div>
                                    <div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-white"></span> Destinations</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-2 mb-8 border-b border-slate-200 pb-4">
                            ${Object.keys(routeData).map(region => `
                                <button onclick="renderRouteGrid('${region}')" 
                                    class="route-btn px-4 py-2 rounded text-sm font-bold uppercase tracking-wide transition focus:outline-none"
                                    id="btn-${region}">
                                    ${region}
                                </button>
                            `).join('')}
                        </div>
                        <div id="route-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
                    </div>
                </div>
            `,

            livemap: `
                <div class="flex flex-col h-[calc(100vh-80px)] fade-in">
                    <div class="bg-slate-900 px-6 py-4 flex justify-between items-center border-b border-slate-800">
                        <div>
                            <h1 class="text-xl font-bold text-white flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></span> 
                                LIVE OPERATIONS
                            </h1>
                            <p class="text-xs text-slate-400">Real-time telemetry of the active elite fleet.</p>
                        </div>
                        <div class="hidden md:block text-right">
                             <p class="text-xs text-slate-500 italic">"Our pilots are the heartbeat of KLM VA."</p>
                        </div>
                    </div>
                    <div class="flex-grow bg-slate-800 relative">
                        <iframe src="https://radarthing.com/?callsign=KLM" class="absolute inset-0 w-full h-full border-0" allowfullscreen></iframe>
                    </div>
                </div>
            `,

            sop: `
                <div class="bg-slate-50 py-24 fade-in">
                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-16">
                            <h1 class="text-4xl font-black text-slate-900 mb-4">Standard Operating Procedures</h1>
                            <p class="text-slate-600 max-w-2xl mx-auto">Discipline is what separates us from the rest. Adherence to SOPs ensures operational efficiency and fleet readiness.</p>
                        </div>

                        <div class="space-y-8">
                            <div class="bg-white p-8 rounded-xl shadow-sm border-l-4 border-klm">
                                <h3 class="text-xl font-bold text-slate-900 mb-4 flex items-center"><i data-lucide="clipboard-check" class="w-5 h-5 mr-3 text-klm"></i> Phase 1: Preparation</h3>
                                <p class="text-slate-600 mb-4">Ensures fleet readiness. Planning must begin 30 minutes prior to pushback.</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm bg-slate-50 p-4 rounded border border-slate-200">
                                    <div><strong>Flight Plan:</strong> Mandatory via SimBrief.</div>
                                    <div><strong>Doors Closed:</strong> 5-15 mins pre-departure.</div>
                                </div>
                            </div>

                            <div class="bg-white p-8 rounded-xl shadow-sm border-l-4 border-klm">
                                <h3 class="text-xl font-bold text-slate-900 mb-4 flex items-center"><i data-lucide="plane-takeoff" class="w-5 h-5 mr-3 text-klm"></i> Phase 2: Execution</h3>
                                <p class="text-slate-600 mb-4">Strict adherence to speed and altitude restrictions maintains airspace realism.</p>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                    <div class="p-3 bg-slate-50 rounded border">
                                        <div class="text-xs text-slate-500 uppercase">Taxi</div>
                                        <div class="font-bold text-slate-900">Max 25 kts</div>
                                    </div>
                                    <div class="p-3 bg-slate-50 rounded border">
                                        <div class="text-xs text-slate-500 uppercase">&lt; 10k ft</div>
                                        <div class="font-bold text-slate-900">250 kts</div>
                                    </div>
                                    <div class="p-3 bg-slate-50 rounded border">
                                        <div class="text-xs text-slate-500 uppercase">Cruise</div>
                                        <div class="font-bold text-slate-900">Index Cost</div>
                                    </div>
                                    <div class="p-3 bg-slate-50 rounded border">
                                        <div class="text-xs text-slate-500 uppercase">Separation</div>
                                        <div class="font-bold text-slate-900">1000ft Vert</div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white p-8 rounded-xl shadow-sm border-l-4 border-klm">
                                <h3 class="text-xl font-bold text-slate-900 mb-4 flex items-center"><i data-lucide="file-check" class="w-5 h-5 mr-3 text-klm"></i> Phase 3: Validation</h3>
                                <p class="text-slate-600 mb-4">Accurate logging tracks pilot performance and contributes to our core metrics.</p>
                                <div class="bg-slate-900 text-slate-300 p-4 rounded font-mono text-xs">
                                    > Submit to #logs<br>
                                    > Require: Dep/Arr, Time, Pilot Name, Screenshot (Aircraft + Nav Map)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            partners: `
                <div class="bg-white py-24 fade-in">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        
                        <!-- DLH Parent -->
                        <div class="bg-slate-900 rounded-2xl p-8 md:p-12 mb-16 text-white relative overflow-hidden">
                             <div class="relative z-10 flex flex-col md:flex-row gap-12 items-center">
                                <div class="md:w-1/2">
                                    <div class="text-amber-400 text-xs font-bold uppercase tracking-widest mb-2">Parent Airline Group</div>
                                    <h2 class="text-4xl font-bold mb-4">Lufthansa Group (DLH)</h2>
                                    <p class="text-slate-300 text-lg leading-relaxed mb-6">
                                        DLH holds a minority stake, providing operational stability while KLM VA runs independently, focused on active pilots and realistic operations.
                                    </p>
                                    <div class="flex gap-4">
                                        <a href="https://midmm2tehdumb.github.io/Lufthansa-Group/index.html" target="_blank" class="border border-white/20 hover:bg-white/10 px-6 py-2 rounded font-bold transition">Visit DLH</a>
                                        <a href="https://discord.gg/TJRUPZj3t9" target="_blank" class="bg-amber-500 hover:bg-amber-600 text-slate-900 px-6 py-2 rounded font-bold transition">Discord</a>
                                    </div>
                                </div>
                                <div class="md:w-1/2 grid grid-cols-2 gap-4">
                                    <div class="bg-white/5 p-4 rounded border border-white/10">
                                        <div class="text-2xl font-bold text-amber-400">Platinum</div>
                                        <div class="text-xs text-slate-400 uppercase">GASA Rating</div>
                                    </div>
                                    <div class="bg-white/5 p-4 rounded border border-white/10">
                                        <div class="text-2xl font-bold text-amber-400">A+</div>
                                        <div class="text-xs text-slate-400 uppercase">ICAO Rating</div>
                                    </div>
                                </div>
                             </div>
                        </div>

                        <!-- Partners Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                            <div>
                                <h3 class="text-2xl font-bold text-slate-900 mb-6">Strategic Oversight</h3>
                                <div class="space-y-6">
                                    <div class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                                        <h4 class="font-bold text-klm mb-2">GASA (Safety Authority)</h4>
                                        <p class="text-sm text-slate-600 mb-3">Ensures safety, fairness, and realism. Operating as a neutral global oversight body.</p>
                                        <ul class="text-xs text-slate-500 space-y-1">
                                            <li>• Auditing & Certification</li>
                                            <li>• Crash Investigation</li>
                                            <li>• Regulatory Enforcement</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                                        <h4 class="font-bold text-sky-600 mb-2">ICAO Community</h4>
                                        <p class="text-sm text-slate-600 mb-3">Prevents chaos and fragmentation. Provides the shared framework for recognition.</p>
                                        <div class="inline-block bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded">Certified Organisation</div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-50 rounded-xl p-8 border border-slate-200 flex flex-col justify-center">
                                <h3 class="font-bold text-slate-900 mb-4">Why Certification Matters</h3>
                                <p class="text-slate-600 mb-6 leading-relaxed">
                                    Being GASA and ICAO certified isn't just a badge. It signifies that KLM VA meets the highest standards of realism, professionalism, and safety within the GeoFS ecosystem.
                                </p>
                                <div class="flex items-center gap-4 text-sm font-bold text-slate-800">
                                    <span class="flex items-center"><i data-lucide="check" class="w-4 h-4 text-klm mr-2"></i> Legitimacy</span>
                                    <span class="flex items-center"><i data-lucide="check" class="w-4 h-4 text-klm mr-2"></i> Visibility</span>
                                    <span class="flex items-center"><i data-lucide="check" class="w-4 h-4 text-klm mr-2"></i> Structure</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            community: `
                <div class="bg-slate-900 py-24 fade-in">
                    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-16">
                            <h1 class="text-4xl font-black text-white mb-6">The Elite Core</h1>
                            <p class="text-slate-400 text-xl max-w-3xl mx-auto leading-relaxed">
                                KLM VA is small, elite, and operations-first. Every member matters — we value skill, realism, and commitment over numbers.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-24">
                            <div class="bg-slate-800 p-6 rounded-lg border border-slate-700 flex flex-col items-center text-center">
                                <div class="epaulette mb-4"><div class="stripe"></div></div>
                                <h3 class="text-white font-bold">Trainee</h3>
                                <p class="text-slate-500 text-xs mt-2">Entry Level<br>Evaluation Phase</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-lg border border-slate-700 flex flex-col items-center text-center">
                                <div class="epaulette mb-4"><div class="stripe"></div><div class="stripe"></div></div>
                                <h3 class="text-white font-bold">Junior Officer</h3>
                                <p class="text-slate-500 text-xs mt-2">20+ Hours<br>Short Haul Ops</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-lg border border-slate-700 flex flex-col items-center text-center">
                                <div class="epaulette mb-4"><div class="stripe"></div><div class="stripe"></div><div class="stripe"></div></div>
                                <h3 class="text-white font-bold">First Officer</h3>
                                <p class="text-slate-500 text-xs mt-2">50+ Hours<br>Complex Ops</p>
                            </div>
                            <div class="bg-slate-800 p-6 rounded-lg border border-slate-700 flex flex-col items-center text-center">
                                <div class="epaulette mb-4"><div class="stripe"></div><div class="stripe"></div><div class="stripe"></div><div class="stripe"></div></div>
                                <h3 class="text-white font-bold">Captain</h3>
                                <p class="text-slate-500 text-xs mt-2">150+ Hours<br>Long Haul Command</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl p-8 md:p-12">
                            <h3 class="text-2xl font-bold text-slate-900 mb-8">Code of Conduct</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                <div>
                                    <h4 class="font-bold text-klm mb-2">01. Professionalism</h4>
                                    <p class="text-sm text-slate-600">Communication must be courteous. Disrespect is not tolerated in our airspace.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-klm mb-2">02. Integrity</h4>
                                    <p class="text-sm text-slate-600">Operational honesty is paramount. Logs must be accurate and verifiable.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-klm mb-2">03. Chain of Command</h4>
                                    <p class="text-sm text-slate-600">Respect staff decisions. They ensure the integrity of the VA.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-klm mb-2">04. Privacy</h4>
                                    <p class="text-sm text-slate-600">Protect member data. Doxxing or sharing private info results in immediate expulsion.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-klm mb-2">05. Safety</h4>
                                    <p class="text-sm text-slate-600">Strictly SFW environment. We maintain a professional simulation atmosphere.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-klm mb-2">06. Excellence</h4>
                                    <p class="text-sm text-slate-600">We fly to a higher standard. Continual improvement is expected.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        function router(pageName) {
            const contentDiv = document.getElementById('app-content');
            contentDiv.innerHTML = pages[pageName] || pages['home'];
            
            // Map Logic for Routes Page
            if (pageName === 'routes') {
                setTimeout(() => {
                    initFleetMap();
                    renderRouteGrid('Europe');
                }, 100);
            }

            lucide.createIcons();
            window.scrollTo(0, 0);

            document.querySelectorAll('.nav-link').forEach(btn => {
                if(btn.getAttribute('onclick').includes(pageName)) {
                    btn.classList.add('active');
                    btn.classList.add('text-klm');
                    btn.classList.remove('text-slate-600');
                } else {
                    btn.classList.remove('active');
                    btn.classList.remove('text-klm');
                    btn.classList.add('text-slate-600');
                }
            });
        }

        // --- MAP LOGIC ---
        let mapInstance = null;
        let flightLinesLayer = null;

        const routeManifest = [
          // EUROPE
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "EGLL", "destinationCoords": [-0.4543, 51.4700], "fleet": ["E190", "E195", "B737-700", "B737-800", "A321neo"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LFPG", "destinationCoords": [2.5479, 49.0097], "fleet": ["E190", "E195", "B737-700", "B737-800", "A321neo"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "EDDB", "destinationCoords": [13.5033, 52.3667], "fleet": ["E190", "E195", "B737-700", "B737-800", "A321neo"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LIRF", "destinationCoords": [12.2508, 41.8003], "fleet": ["B737-800", "A321neo"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LEMD", "destinationCoords": [-3.5668, 40.4893], "fleet": ["B737-800", "A321neo"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LOWW", "destinationCoords": [16.5697, 48.1103], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "EBBR", "destinationCoords": [4.4844, 50.9014], "fleet": ["E190", "E195"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LSZH", "destinationCoords": [8.5492, 47.4581], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LSGG", "destinationCoords": [6.1092, 46.2370], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "ESSA", "destinationCoords": [17.9186, 59.6519], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "EKCH", "destinationCoords": [12.6560, 55.6180], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "ENGM", "destinationCoords": [11.1004, 60.1939], "fleet": ["E190", "E195"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "EFHK", "destinationCoords": [24.9633, 60.3172], "fleet": ["E190", "E195", "B737-800"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LGAV", "destinationCoords": [23.9445, 37.9364], "fleet": ["B737-800", "A321neo"], "hub": true },
          
          // NORTH AMERICA
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KJFK", "destinationCoords": [-73.7781, 40.6413], "fleet": ["B787-9", "B787-10", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KATL", "destinationCoords": [-84.4277, 33.6407], "fleet": ["B787-9", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KLAX", "destinationCoords": [-118.4085, 33.9416], "fleet": ["B787-10", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KSFO", "destinationCoords": [-122.3790, 37.6213], "fleet": ["B787-9", "B787-10"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KORD", "destinationCoords": [-87.9073, 41.9742], "fleet": ["B787-9"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KBOS", "destinationCoords": [-71.0052, 42.3656], "fleet": ["B787-9"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "KIAD", "destinationCoords": [-77.4565, 38.9531], "fleet": ["B787-9"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "CYYZ", "destinationCoords": [-79.6248, 43.6777], "fleet": ["B777-300ER", "B787-10"], "hub": true },

          // SOUTH AMERICA & CARIBBEAN
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "SBGR", "destinationCoords": [-46.4731, -23.4356], "fleet": ["B777-300ER", "B787-9"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "SAEZ", "destinationCoords": [-58.5358, -34.8222], "fleet": ["B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "SKBO", "destinationCoords": [-74.1469, 4.7016], "fleet": ["B787-9"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "TNCA", "destinationCoords": [-70.0152, 12.5014], "fleet": ["A330-200"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "TNCM", "destinationCoords": [-63.1089, 18.0410], "fleet": ["A330-200"], "hub": true },

          // ASIA & MIDDLE EAST
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "RJAA", "destinationCoords": [140.3929, 35.7719], "fleet": ["B787-9", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "VHHH", "destinationCoords": [113.9146, 22.3080], "fleet": ["B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "WSSS", "destinationCoords": [103.9940, 1.3644], "fleet": ["B787-10", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "OMDB", "destinationCoords": [55.3644, 25.2532], "fleet": ["B787-9", "B777-300ER"], "hub": true },
          { "origin": "EHAM", "originCoords": [4.7639, 52.3091], "destination": "LLBG", "destinationCoords": [34.8854, 32.0114], "fleet": ["B737-900"], "hub": true }
        ];

        function initFleetMap() {
            const container = document.getElementById('fleet-map');
            if (!container) return;
            if (mapInstance) { mapInstance.remove(); mapInstance = null; }

            mapInstance = L.map('fleet-map', {
                center: [30, 0],
                zoom: 2,
                minZoom: 2,
                maxBounds: [[-90, -180], [90, 180]],
                zoomControl: false,
                attributionControl: false
            });

            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(mapInstance);
            
            flightLinesLayer = L.layerGroup().addTo(mapInstance);
            filterMapRoutes('ALL');
        }

        function filterMapRoutes(aircraftType) {
            if (!flightLinesLayer) return;
            flightLinesLayer.clearLayers();
            
            const hubIcon = L.divIcon({
                className: 'custom-div-icon',
                html: "<div style='background-color:#00A1DE;width:8px;height:8px;border-radius:50%;box-shadow:0 0 15px #00A1DE;'></div>",
                iconSize: [8, 8],
                iconAnchor: [4, 4]
            });
            L.marker([52.3091, 4.7639], { icon: hubIcon }).addTo(flightLinesLayer);

            routeManifest.forEach(route => {
                const start = [route.originCoords[1], route.originCoords[0]];
                const end = [route.destinationCoords[1], route.destinationCoords[0]];
                const latlngs = getCurvePoints(start, end);

                const polyline = L.polyline(latlngs, {
                    color: '#00A1DE', weight: 1, opacity: 0.4, smoothFactor: 1
                });
                
                polyline.addTo(flightLinesLayer);
                
                L.circleMarker(end, {
                    radius: 2, fillColor: '#fff', color: '#00A1DE', weight: 0, opacity: 1, fillOpacity: 0.8
                }).addTo(flightLinesLayer);
            });
        }

        function getCurvePoints(start, end) {
            const lat1 = start[0], lng1 = start[1];
            const lat2 = end[0], lng2 = end[1];
            const midLat = (lat1 + lat2) / 2;
            const midLng = (lng1 + lng2) / 2;
            const dist = Math.sqrt(Math.pow(lat2 - lat1, 2) + Math.pow(lng2 - lng1, 2));
            const controlLat = midLat + (dist * 0.25); 
            const controlLng = midLng; 
            const points = [];
            for(let t=0; t<=1; t+=0.02) {
                const invT = 1 - t;
                const lat = (invT * invT * lat1) + (2 * invT * t * controlLat) + (t * t * lat2);
                const lng = (invT * invT * lng1) + (2 * invT * t * controlLng) + (t * t * lng2);
                points.push([lat, lng]);
            }
            points.push([lat2, lng2]); 
            return points;
        }

        function renderRouteGrid(region) {
            const grid = document.getElementById('route-grid');
            const data = routeData[region] || [];
            document.querySelectorAll('.route-btn').forEach(btn => {
                if(btn.id === `btn-${region}`) {
                    btn.classList.add('bg-klm', 'text-white');
                    btn.classList.remove('bg-white', 'text-slate-600', 'hover:bg-slate-50');
                } else {
                    btn.classList.remove('bg-klm', 'text-white');
                    btn.classList.add('bg-white', 'text-slate-600', 'hover:bg-slate-50', 'border', 'border-slate-200');
                }
            });
            grid.innerHTML = data.map(route => `
                <div class="bg-white p-4 rounded border border-slate-200 hover:border-klm transition">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-slate-800 text-sm truncate">${route.city}</span>
                        <span class="font-mono text-xs text-slate-400">${route.code}</span>
                    </div>
                    <div class="flex gap-2 text-[10px] font-mono text-slate-500">
                         <span class="bg-slate-100 px-1 rounded">OUT: ${route.out}</span>
                         <span class="bg-slate-100 px-1 rounded">IN: ${route.in}</span>
                    </div>
                </div>
            `).join('');
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        // Init
        document.getElementById('nav-logo').src = siteImages.logo;
        document.getElementById('footer-logo').src = siteImages.logo;
        router('home');

    </script>
</body>
</html>
